function cov_1b1qrw0h05(){var path="/Users/mario/Desktop/FinalProyect/Api/logic/registerUser.js";var hash="b61d8adc4d02248bf1d6130b47c2226bc1271c40";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mario/Desktop/FinalProyect/Api/logic/registerUser.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:18}},"1":{start:{line:5,column:17},end:{line:5,column:42}},"2":{start:{line:22,column:0},end:{line:40,column:1}},"3":{start:{line:23,column:4},end:{line:23,column:22}},"4":{start:{line:24,column:4},end:{line:24,column:24}},"5":{start:{line:25,column:4},end:{line:25,column:30}},"6":{start:{line:27,column:4},end:{line:39,column:8}},"7":{start:{line:28,column:8},end:{line:38,column:9}},"8":{start:{line:29,column:12},end:{line:29,column:80}},"9":{start:{line:31,column:12},end:{line:35,column:17}},"10":{start:{line:32,column:16},end:{line:35,column:17}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:22,column:17},end:{line:22,column:18}},loc:{start:{line:22,column:44},end:{line:40,column:1}},line:22},"1":{name:"(anonymous_1)",decl:{start:{line:27,column:12},end:{line:27,column:13}},loc:{start:{line:27,column:24},end:{line:39,column:5}},line:27}},branchMap:{"0":{loc:{start:{line:31,column:12},end:{line:35,column:17}},type:"if",locations:[{start:{line:31,column:12},end:{line:35,column:17}},{start:{line:31,column:12},end:{line:35,column:17}}],line:31}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b61d8adc4d02248bf1d6130b47c2226bc1271c40"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1b1qrw0h05=function(){return actualCoverage;};}return actualCoverage;}cov_1b1qrw0h05();const{validators:{validateName,validateEmail,validatePassword},errors:{DuplicityError}}=(cov_1b1qrw0h05().s[0]++,require('com'));const{User}=(cov_1b1qrw0h05().s[1]++,require('../data/models'));//Registro de usuario con promesas y usando mongo
/**
 * Register a user
 * @param {string} name
 * @param {string} email
 * @param {string} password
 *
 * @returns {Promise<string>} the userId
 *
 * @throws {DuplicityError} On already existing email
 *
 *
 * */cov_1b1qrw0h05().s[2]++;module.exports=(name,email,password)=>{cov_1b1qrw0h05().f[0]++;cov_1b1qrw0h05().s[3]++;validateName(name);cov_1b1qrw0h05().s[4]++;validateEmail(email);cov_1b1qrw0h05().s[5]++;validatePassword(password);cov_1b1qrw0h05().s[6]++;return(async()=>{cov_1b1qrw0h05().f[1]++;cov_1b1qrw0h05().s[7]++;try{cov_1b1qrw0h05().s[8]++;await User.create({name,email,password,avatar:null,favs:[]});}catch(error){cov_1b1qrw0h05().s[9]++;if(error.message.includes('E11000')){cov_1b1qrw0h05().b[0][0]++;cov_1b1qrw0h05().s[10]++;throw new DuplicityError(// `User with email ${email} already exists`
'Email is not valid');}else{cov_1b1qrw0h05().b[0][1]++;}// throw error
}})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWIxcXJ3MGgwNSIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlTmFtZSIsInZhbGlkYXRlRW1haWwiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwiZXJyb3JzIiwiRHVwbGljaXR5RXJyb3IiLCJzIiwicmVxdWlyZSIsIlVzZXIiLCJtb2R1bGUiLCJleHBvcnRzIiwibmFtZSIsImVtYWlsIiwicGFzc3dvcmQiLCJmIiwiY3JlYXRlIiwiYXZhdGFyIiwiZmF2cyIsImVycm9yIiwibWVzc2FnZSIsImluY2x1ZGVzIiwiYiJdLCJzb3VyY2VzIjpbInJlZ2lzdGVyVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gICAgdmFsaWRhdG9yczogeyB2YWxpZGF0ZU5hbWUsIHZhbGlkYXRlRW1haWwsIHZhbGlkYXRlUGFzc3dvcmQgfSxcbiAgICBlcnJvcnM6IHsgRHVwbGljaXR5RXJyb3IgfSxcbn0gPSByZXF1aXJlKCdjb20nKVxuY29uc3QgeyBVc2VyIH0gPSByZXF1aXJlKCcuLi9kYXRhL21vZGVscycpXG5cbi8vUmVnaXN0cm8gZGUgdXN1YXJpbyBjb24gcHJvbWVzYXMgeSB1c2FuZG8gbW9uZ29cblxuLyoqXG4gKiBSZWdpc3RlciBhIHVzZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZFxuICpcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IHRoZSB1c2VySWRcbiAqXG4gKiBAdGhyb3dzIHtEdXBsaWNpdHlFcnJvcn0gT24gYWxyZWFkeSBleGlzdGluZyBlbWFpbFxuICpcbiAqXG4gKiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IChuYW1lLCBlbWFpbCwgcGFzc3dvcmQpID0+IHtcbiAgICB2YWxpZGF0ZU5hbWUobmFtZSlcbiAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IFVzZXIuY3JlYXRlKHsgbmFtZSwgZW1haWwsIHBhc3N3b3JkLCBhdmF0YXI6IG51bGwsIGZhdnM6IFtdIH0pXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRTExMDAwJykpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IER1cGxpY2l0eUVycm9yKFxuICAgICAgICAgICAgICAgICAgICAvLyBgVXNlciB3aXRoIGVtYWlsICR7ZW1haWx9IGFscmVhZHkgZXhpc3RzYFxuICAgICAgICAgICAgICAgICAgICAnRW1haWwgaXMgbm90IHZhbGlkJ1xuICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgLy8gdGhyb3cgZXJyb3JcbiAgICAgICAgfVxuICAgIH0pKClcbn1cbiJdLCJtYXBwaW5ncyI6Ijh2REFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQ0ZFLFVBQVUsQ0FBRSxDQUFFQyxZQUFZLENBQUVDLGFBQWEsQ0FBRUMsZ0JBQWlCLENBQUMsQ0FDN0RDLE1BQU0sQ0FBRSxDQUFFQyxjQUFlLENBQzdCLENBQUMsRUFBQVAsY0FBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxJQUFLLENBQUMsRUFBQVYsY0FBQSxHQUFBUSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUUxQztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQVhBVCxjQUFBLEdBQUFRLENBQUEsTUFhQUcsTUFBTSxDQUFDQyxPQUFPLENBQUcsQ0FBQ0MsSUFBSSxDQUFFQyxLQUFLLENBQUVDLFFBQVEsR0FBSyxDQUFBZixjQUFBLEdBQUFnQixDQUFBLE1BQUFoQixjQUFBLEdBQUFRLENBQUEsTUFDeENMLFlBQVksQ0FBQ1UsSUFBSSxDQUFDLENBQUFiLGNBQUEsR0FBQVEsQ0FBQSxNQUNsQkosYUFBYSxDQUFDVSxLQUFLLENBQUMsQ0FBQWQsY0FBQSxHQUFBUSxDQUFBLE1BQ3BCSCxnQkFBZ0IsQ0FBQ1UsUUFBUSxDQUFDLENBQUFmLGNBQUEsR0FBQVEsQ0FBQSxNQUUxQixNQUFPLENBQUMsU0FBWSxDQUFBUixjQUFBLEdBQUFnQixDQUFBLE1BQUFoQixjQUFBLEdBQUFRLENBQUEsTUFDaEIsR0FBSSxDQUFBUixjQUFBLEdBQUFRLENBQUEsTUFDQSxLQUFNLENBQUFFLElBQUksQ0FBQ08sTUFBTSxDQUFDLENBQUVKLElBQUksQ0FBRUMsS0FBSyxDQUFFQyxRQUFRLENBQUVHLE1BQU0sQ0FBRSxJQUFJLENBQUVDLElBQUksQ0FBRSxFQUFHLENBQUMsQ0FBQyxDQUN4RSxDQUFFLE1BQU9DLEtBQUssQ0FBRSxDQUFBcEIsY0FBQSxHQUFBUSxDQUFBLE1BQ1osR0FBSVksS0FBSyxDQUFDQyxPQUFPLENBQUNDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDaEMsQ0FBQXRCLGNBQUEsR0FBQXVCLENBQUEsU0FBQXZCLGNBQUEsR0FBQVEsQ0FBQSxZQUFNLElBQUksQ0FBQUQsY0FBYyxDQUNwQjtBQUNBLG9CQUNKLENBQUMsQ0FBRCxDQUFDLEtBQUFQLGNBQUEsR0FBQXVCLENBQUEsVUFFTDtBQUNKLENBQ0osQ0FBQyxFQUFFLENBQUMsQ0FDUixDQUFDIn0=