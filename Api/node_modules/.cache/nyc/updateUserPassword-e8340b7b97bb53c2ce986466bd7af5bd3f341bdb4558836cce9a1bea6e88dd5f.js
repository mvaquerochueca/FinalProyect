function cov_19o3cscio8(){var path="/Users/mario/Desktop/FinalProyect/Api/logic/updateUserPassword.js";var hash="c1e1e89919572c343355bcd2f993c6d1181b6a47";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mario/Desktop/FinalProyect/Api/logic/updateUserPassword.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:18}},"1":{start:{line:4,column:17},end:{line:4,column:42}},"2":{start:{line:6,column:0},end:{line:35,column:1}},"3":{start:{line:12,column:4},end:{line:12,column:22}},"4":{start:{line:13,column:4},end:{line:13,column:38}},"5":{start:{line:14,column:4},end:{line:14,column:33}},"6":{start:{line:15,column:4},end:{line:15,column:40}},"7":{start:{line:17,column:4},end:{line:34,column:8}},"8":{start:{line:18,column:21},end:{line:18,column:48}},"9":{start:{line:19,column:8},end:{line:19,column:53}},"10":{start:{line:19,column:19},end:{line:19,column:53}},"11":{start:{line:20,column:8},end:{line:21,column:54}},"12":{start:{line:21,column:12},end:{line:21,column:54}},"13":{start:{line:22,column:8},end:{line:25,column:13}},"14":{start:{line:23,column:12},end:{line:25,column:13}},"15":{start:{line:26,column:8},end:{line:29,column:13}},"16":{start:{line:27,column:12},end:{line:29,column:13}},"17":{start:{line:30,column:8},end:{line:31,column:62}},"18":{start:{line:31,column:12},end:{line:31,column:62}},"19":{start:{line:33,column:8},end:{line:33,column:55}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:11,column:5},end:{line:35,column:1}},line:11},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:12},end:{line:17,column:13}},loc:{start:{line:17,column:24},end:{line:34,column:5}},line:17}},branchMap:{"0":{loc:{start:{line:19,column:8},end:{line:19,column:53}},type:"if",locations:[{start:{line:19,column:8},end:{line:19,column:53}},{start:{line:19,column:8},end:{line:19,column:53}}],line:19},"1":{loc:{start:{line:20,column:8},end:{line:21,column:54}},type:"if",locations:[{start:{line:20,column:8},end:{line:21,column:54}},{start:{line:20,column:8},end:{line:21,column:54}}],line:20},"2":{loc:{start:{line:22,column:8},end:{line:25,column:13}},type:"if",locations:[{start:{line:22,column:8},end:{line:25,column:13}},{start:{line:22,column:8},end:{line:25,column:13}}],line:22},"3":{loc:{start:{line:26,column:8},end:{line:29,column:13}},type:"if",locations:[{start:{line:26,column:8},end:{line:29,column:13}},{start:{line:26,column:8},end:{line:29,column:13}}],line:26},"4":{loc:{start:{line:30,column:8},end:{line:31,column:62}},type:"if",locations:[{start:{line:30,column:8},end:{line:31,column:62}},{start:{line:30,column:8},end:{line:31,column:62}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c1e1e89919572c343355bcd2f993c6d1181b6a47"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_19o3cscio8=function(){return actualCoverage;};}return actualCoverage;}cov_19o3cscio8();const{validators:{validateId,validatePassword}}=(cov_19o3cscio8().s[0]++,require('com'));const{User}=(cov_19o3cscio8().s[1]++,require('../data/models'));cov_19o3cscio8().s[2]++;module.exports=(userId,previousPassword,newPassword,newPasswordConfirm)=>{cov_19o3cscio8().f[0]++;cov_19o3cscio8().s[3]++;validateId(userId);cov_19o3cscio8().s[4]++;validatePassword(previousPassword);cov_19o3cscio8().s[5]++;validatePassword(newPassword);cov_19o3cscio8().s[6]++;validatePassword(newPasswordConfirm);cov_19o3cscio8().s[7]++;return(async()=>{cov_19o3cscio8().f[1]++;const user=(cov_19o3cscio8().s[8]++,await User.findById(userId));cov_19o3cscio8().s[9]++;if(!user){cov_19o3cscio8().b[0][0]++;cov_19o3cscio8().s[10]++;throw new Error('User not found!');}else{cov_19o3cscio8().b[0][1]++;}cov_19o3cscio8().s[11]++;if(newPassword!==newPasswordConfirm){cov_19o3cscio8().b[1][0]++;cov_19o3cscio8().s[12]++;throw new Error('Passwords do not match!');}else{cov_19o3cscio8().b[1][1]++;}cov_19o3cscio8().s[13]++;if(previousPassword===newPassword){cov_19o3cscio8().b[2][0]++;cov_19o3cscio8().s[14]++;throw new Error('New password cannot be the same as the previous one!');}else{cov_19o3cscio8().b[2][1]++;}cov_19o3cscio8().s[15]++;if(previousPassword===newPasswordConfirm){cov_19o3cscio8().b[3][0]++;cov_19o3cscio8().s[16]++;throw new Error('New password cannot be the same as the previous one!');}else{cov_19o3cscio8().b[3][1]++;}cov_19o3cscio8().s[17]++;if(user.password!==previousPassword){cov_19o3cscio8().b[4][0]++;cov_19o3cscio8().s[18]++;throw new Error('Previous password is incorrect!');}else{cov_19o3cscio8().b[4][1]++;}cov_19o3cscio8().s[19]++;await user.updateOne({password:newPassword});})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTlvM2NzY2lvOCIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlSWQiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwicyIsInJlcXVpcmUiLCJVc2VyIiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInByZXZpb3VzUGFzc3dvcmQiLCJuZXdQYXNzd29yZCIsIm5ld1Bhc3N3b3JkQ29uZmlybSIsImYiLCJ1c2VyIiwiZmluZEJ5SWQiLCJiIiwiRXJyb3IiLCJwYXNzd29yZCIsInVwZGF0ZU9uZSJdLCJzb3VyY2VzIjpbInVwZGF0ZVVzZXJQYXNzd29yZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gICAgdmFsaWRhdG9yczogeyB2YWxpZGF0ZUlkLCB2YWxpZGF0ZVBhc3N3b3JkIH0sXG59ID0gcmVxdWlyZSgnY29tJylcbmNvbnN0IHsgVXNlciB9ID0gcmVxdWlyZSgnLi4vZGF0YS9tb2RlbHMnKVxuXG5tb2R1bGUuZXhwb3J0cyA9IChcbiAgICB1c2VySWQsXG4gICAgcHJldmlvdXNQYXNzd29yZCxcbiAgICBuZXdQYXNzd29yZCxcbiAgICBuZXdQYXNzd29yZENvbmZpcm1cbikgPT4ge1xuICAgIHZhbGlkYXRlSWQodXNlcklkKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQocHJldmlvdXNQYXNzd29yZClcbiAgICB2YWxpZGF0ZVBhc3N3b3JkKG5ld1Bhc3N3b3JkKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQobmV3UGFzc3dvcmRDb25maXJtKVxuXG4gICAgcmV0dXJuIChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZClcbiAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kIScpXG4gICAgICAgIGlmIChuZXdQYXNzd29yZCAhPT0gbmV3UGFzc3dvcmRDb25maXJtKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQYXNzd29yZHMgZG8gbm90IG1hdGNoIScpXG4gICAgICAgIGlmIChwcmV2aW91c1Bhc3N3b3JkID09PSBuZXdQYXNzd29yZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnTmV3IHBhc3N3b3JkIGNhbm5vdCBiZSB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lISdcbiAgICAgICAgICAgIClcbiAgICAgICAgaWYgKHByZXZpb3VzUGFzc3dvcmQgPT09IG5ld1Bhc3N3b3JkQ29uZmlybSlcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnTmV3IHBhc3N3b3JkIGNhbm5vdCBiZSB0aGUgc2FtZSBhcyB0aGUgcHJldmlvdXMgb25lISdcbiAgICAgICAgICAgIClcbiAgICAgICAgaWYgKHVzZXIucGFzc3dvcmQgIT09IHByZXZpb3VzUGFzc3dvcmQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1ByZXZpb3VzIHBhc3N3b3JkIGlzIGluY29ycmVjdCEnKVxuXG4gICAgICAgIGF3YWl0IHVzZXIudXBkYXRlT25lKHsgcGFzc3dvcmQ6IG5ld1Bhc3N3b3JkIH0pXG4gICAgfSkoKVxufVxuIl0sIm1hcHBpbmdzIjoiMG1HQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FDRkUsVUFBVSxDQUFFLENBQUVDLFVBQVUsQ0FBRUMsZ0JBQWlCLENBQy9DLENBQUMsRUFBQUosY0FBQSxHQUFBSyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxJQUFLLENBQUMsRUFBQVAsY0FBQSxHQUFBSyxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFBTixjQUFBLEdBQUFLLENBQUEsTUFFMUNHLE1BQU0sQ0FBQ0MsT0FBTyxDQUFHLENBQ2JDLE1BQU0sQ0FDTkMsZ0JBQWdCLENBQ2hCQyxXQUFXLENBQ1hDLGtCQUFrQixHQUNqQixDQUFBYixjQUFBLEdBQUFjLENBQUEsTUFBQWQsY0FBQSxHQUFBSyxDQUFBLE1BQ0RGLFVBQVUsQ0FBQ08sTUFBTSxDQUFDLENBQUFWLGNBQUEsR0FBQUssQ0FBQSxNQUNsQkQsZ0JBQWdCLENBQUNPLGdCQUFnQixDQUFDLENBQUFYLGNBQUEsR0FBQUssQ0FBQSxNQUNsQ0QsZ0JBQWdCLENBQUNRLFdBQVcsQ0FBQyxDQUFBWixjQUFBLEdBQUFLLENBQUEsTUFDN0JELGdCQUFnQixDQUFDUyxrQkFBa0IsQ0FBQyxDQUFBYixjQUFBLEdBQUFLLENBQUEsTUFFcEMsTUFBTyxDQUFDLFNBQVksQ0FBQUwsY0FBQSxHQUFBYyxDQUFBLE1BQ2hCLEtBQU0sQ0FBQUMsSUFBSSxFQUFBZixjQUFBLEdBQUFLLENBQUEsTUFBRyxLQUFNLENBQUFFLElBQUksQ0FBQ1MsUUFBUSxDQUFDTixNQUFNLENBQUMsRUFBQVYsY0FBQSxHQUFBSyxDQUFBLE1BQ3hDLEdBQUksQ0FBQ1UsSUFBSSxDQUFFLENBQUFmLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUssQ0FBQSxZQUFNLElBQUksQ0FBQWEsS0FBSyxDQUFDLGlCQUFpQixDQUFDLENBQUQsQ0FBQyxLQUFBbEIsY0FBQSxHQUFBaUIsQ0FBQSxVQUFBakIsY0FBQSxHQUFBSyxDQUFBLE9BQzdDLEdBQUlPLFdBQVcsR0FBS0Msa0JBQWtCLENBQ2xDLENBQUFiLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUssQ0FBQSxZQUFNLElBQUksQ0FBQWEsS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUQsQ0FBQyxLQUFBbEIsY0FBQSxHQUFBaUIsQ0FBQSxVQUFBakIsY0FBQSxHQUFBSyxDQUFBLE9BQzlDLEdBQUlNLGdCQUFnQixHQUFLQyxXQUFXLENBQ2hDLENBQUFaLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUssQ0FBQSxZQUFNLElBQUksQ0FBQWEsS0FBSyxDQUNYLHNEQUNKLENBQUMsQ0FBRCxDQUFDLEtBQUFsQixjQUFBLEdBQUFpQixDQUFBLFVBQUFqQixjQUFBLEdBQUFLLENBQUEsT0FDTCxHQUFJTSxnQkFBZ0IsR0FBS0Usa0JBQWtCLENBQ3ZDLENBQUFiLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUssQ0FBQSxZQUFNLElBQUksQ0FBQWEsS0FBSyxDQUNYLHNEQUNKLENBQUMsQ0FBRCxDQUFDLEtBQUFsQixjQUFBLEdBQUFpQixDQUFBLFVBQUFqQixjQUFBLEdBQUFLLENBQUEsT0FDTCxHQUFJVSxJQUFJLENBQUNJLFFBQVEsR0FBS1IsZ0JBQWdCLENBQ2xDLENBQUFYLGNBQUEsR0FBQWlCLENBQUEsU0FBQWpCLGNBQUEsR0FBQUssQ0FBQSxZQUFNLElBQUksQ0FBQWEsS0FBSyxDQUFDLGlDQUFpQyxDQUFDLENBQUQsQ0FBQyxLQUFBbEIsY0FBQSxHQUFBaUIsQ0FBQSxVQUFBakIsY0FBQSxHQUFBSyxDQUFBLE9BRXRELEtBQU0sQ0FBQVUsSUFBSSxDQUFDSyxTQUFTLENBQUMsQ0FBRUQsUUFBUSxDQUFFUCxXQUFZLENBQUMsQ0FBQyxDQUNuRCxDQUFDLEVBQUUsQ0FBQyxDQUNSLENBQUMifQ==