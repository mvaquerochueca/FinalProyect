function cov_17n9j66p6h(){var path="/Users/mario/Desktop/FinalProyect/Api/logic/createPost.js";var hash="931d05a2b4adebbb97cf92dbc82a640bf2083689";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mario/Desktop/FinalProyect/Api/logic/createPost.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:18}},"1":{start:{line:4,column:23},end:{line:4,column:51}},"2":{start:{line:6,column:0},end:{line:42,column:1}},"3":{start:{line:8,column:4},end:{line:8,column:35}},"4":{start:{line:9,column:4},end:{line:9,column:22}},"5":{start:{line:10,column:4},end:{line:10,column:41}},"6":{start:{line:12,column:4},end:{line:25,column:8}},"7":{start:{line:13,column:21},end:{line:13,column:48}},"8":{start:{line:15,column:8},end:{line:15,column:60}},"9":{start:{line:15,column:19},end:{line:15,column:60}},"10":{start:{line:17,column:21},end:{line:22,column:10}},"11":{start:{line:24,column:8},end:{line:24,column:23}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:52},end:{line:42,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:12},end:{line:12,column:13}},loc:{start:{line:12,column:24},end:{line:25,column:5}},line:12}},branchMap:{"0":{loc:{start:{line:15,column:8},end:{line:15,column:60}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:60}},{start:{line:15,column:8},end:{line:15,column:60}}],line:15}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0},b:{"0":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"931d05a2b4adebbb97cf92dbc82a640bf2083689"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_17n9j66p6h=function(){return actualCoverage;};}return actualCoverage;}cov_17n9j66p6h();const{validators:{validateId,validateUrl,validateText}}=(cov_17n9j66p6h().s[0]++,require('com'));const{User,Post}=(cov_17n9j66p6h().s[1]++,require('../data/models.js'));cov_17n9j66p6h().s[2]++;module.exports=(userId,image,text,location)=>{cov_17n9j66p6h().f[0]++;cov_17n9j66p6h().s[3]++;// validateId(userId, 'user id')
validateUrl(image,'image url');cov_17n9j66p6h().s[4]++;validateText(text);cov_17n9j66p6h().s[5]++;validateUrl(location,'location url');cov_17n9j66p6h().s[6]++;return(async()=>{cov_17n9j66p6h().f[1]++;const user=(cov_17n9j66p6h().s[7]++,await User.findById(userId));cov_17n9j66p6h().s[8]++;if(!user){cov_17n9j66p6h().b[0][0]++;cov_17n9j66p6h().s[9]++;throw new Error(`user with id not found`);}else{cov_17n9j66p6h().b[0][1]++;}const post=(cov_17n9j66p6h().s[10]++,await Post.create({author:userId,image,location,text}));cov_17n9j66p6h().s[11]++;return post._id;})();//     User.findById(userId)
//         .then((user) => {
//             if (!user) throw new Error(`user with id ${userId} not found`)
//             return Post.create({
//                 author: userId,
//                 image,
//                 location,
//                 text,
//             })
//         })
//         //El siguiente then es para que no devuelva nada al crear el post
//         .then(() => {})
// )
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTduOWo2NnA2aCIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlSWQiLCJ2YWxpZGF0ZVVybCIsInZhbGlkYXRlVGV4dCIsInMiLCJyZXF1aXJlIiwiVXNlciIsIlBvc3QiLCJtb2R1bGUiLCJleHBvcnRzIiwidXNlcklkIiwiaW1hZ2UiLCJ0ZXh0IiwibG9jYXRpb24iLCJmIiwidXNlciIsImZpbmRCeUlkIiwiYiIsIkVycm9yIiwicG9zdCIsImNyZWF0ZSIsImF1dGhvciIsIl9pZCJdLCJzb3VyY2VzIjpbImNyZWF0ZVBvc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICAgIHZhbGlkYXRvcnM6IHsgdmFsaWRhdGVJZCwgdmFsaWRhdGVVcmwsIHZhbGlkYXRlVGV4dCB9LFxufSA9IHJlcXVpcmUoJ2NvbScpXG5jb25zdCB7IFVzZXIsIFBvc3QgfSA9IHJlcXVpcmUoJy4uL2RhdGEvbW9kZWxzLmpzJylcblxubW9kdWxlLmV4cG9ydHMgPSAodXNlcklkLCBpbWFnZSwgdGV4dCwgbG9jYXRpb24pID0+IHtcbiAgICAvLyB2YWxpZGF0ZUlkKHVzZXJJZCwgJ3VzZXIgaWQnKVxuICAgIHZhbGlkYXRlVXJsKGltYWdlLCAnaW1hZ2UgdXJsJylcbiAgICB2YWxpZGF0ZVRleHQodGV4dClcbiAgICB2YWxpZGF0ZVVybChsb2NhdGlvbiwgJ2xvY2F0aW9uIHVybCcpXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKVxuXG4gICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKGB1c2VyIHdpdGggaWQgbm90IGZvdW5kYClcblxuICAgICAgICBjb25zdCBwb3N0ID0gYXdhaXQgUG9zdC5jcmVhdGUoe1xuICAgICAgICAgICAgYXV0aG9yOiB1c2VySWQsXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIGxvY2F0aW9uLFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgfSlcblxuICAgICAgICByZXR1cm4gcG9zdC5faWRcbiAgICB9KSgpXG5cbiAgICAvLyAgICAgVXNlci5maW5kQnlJZCh1c2VySWQpXG4gICAgLy8gICAgICAgICAudGhlbigodXNlcikgPT4ge1xuICAgIC8vICAgICAgICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKGB1c2VyIHdpdGggaWQgJHt1c2VySWR9IG5vdCBmb3VuZGApXG5cbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gUG9zdC5jcmVhdGUoe1xuICAgIC8vICAgICAgICAgICAgICAgICBhdXRob3I6IHVzZXJJZCxcbiAgICAvLyAgICAgICAgICAgICAgICAgaW1hZ2UsXG4gICAgLy8gICAgICAgICAgICAgICAgIGxvY2F0aW9uLFxuICAgIC8vICAgICAgICAgICAgICAgICB0ZXh0LFxuICAgIC8vICAgICAgICAgICAgIH0pXG4gICAgLy8gICAgICAgICB9KVxuXG4gICAgLy8gICAgICAgICAvL0VsIHNpZ3VpZW50ZSB0aGVuIGVzIHBhcmEgcXVlIG5vIGRldnVlbHZhIG5hZGEgYWwgY3JlYXIgZWwgcG9zdFxuICAgIC8vICAgICAgICAgLnRoZW4oKCkgPT4ge30pXG4gICAgLy8gKVxufVxuIl0sIm1hcHBpbmdzIjoiOHlEQWVZO0FBQUFBLGNBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsY0FBQSxHQWZaLEtBQU0sQ0FDRkUsVUFBVSxDQUFFLENBQUVDLFVBQVUsQ0FBRUMsV0FBVyxDQUFFQyxZQUFhLENBQ3hELENBQUMsRUFBQUwsY0FBQSxHQUFBTSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxJQUFJLENBQUVDLElBQUssQ0FBQyxFQUFBVCxjQUFBLEdBQUFNLENBQUEsTUFBR0MsT0FBTyxDQUFDLG1CQUFtQixDQUFDLEVBQUFQLGNBQUEsR0FBQU0sQ0FBQSxNQUVuREksTUFBTSxDQUFDQyxPQUFPLENBQUcsQ0FBQ0MsTUFBTSxDQUFFQyxLQUFLLENBQUVDLElBQUksQ0FBRUMsUUFBUSxHQUFLLENBQUFmLGNBQUEsR0FBQWdCLENBQUEsTUFBQWhCLGNBQUEsR0FBQU0sQ0FBQSxNQUNoRDtBQUNBRixXQUFXLENBQUNTLEtBQUssQ0FBRSxXQUFXLENBQUMsQ0FBQWIsY0FBQSxHQUFBTSxDQUFBLE1BQy9CRCxZQUFZLENBQUNTLElBQUksQ0FBQyxDQUFBZCxjQUFBLEdBQUFNLENBQUEsTUFDbEJGLFdBQVcsQ0FBQ1csUUFBUSxDQUFFLGNBQWMsQ0FBQyxDQUFBZixjQUFBLEdBQUFNLENBQUEsTUFFckMsTUFBTyxDQUFDLFNBQVksQ0FBQU4sY0FBQSxHQUFBZ0IsQ0FBQSxNQUNoQixLQUFNLENBQUFDLElBQUksRUFBQWpCLGNBQUEsR0FBQU0sQ0FBQSxNQUFHLEtBQU0sQ0FBQUUsSUFBSSxDQUFDVSxRQUFRLENBQUNOLE1BQU0sQ0FBQyxFQUFBWixjQUFBLEdBQUFNLENBQUEsTUFFeEMsR0FBSSxDQUFDVyxJQUFJLENBQUUsQ0FBQWpCLGNBQUEsR0FBQW1CLENBQUEsU0FBQW5CLGNBQUEsR0FBQU0sQ0FBQSxXQUFNLElBQUksQ0FBQWMsS0FBSyxDQUFFLHdCQUF1QixDQUFDLENBQUQsQ0FBQyxLQUFBcEIsY0FBQSxHQUFBbUIsQ0FBQSxVQUVwRCxLQUFNLENBQUFFLElBQUksRUFBQXJCLGNBQUEsR0FBQU0sQ0FBQSxPQUFHLEtBQU0sQ0FBQUcsSUFBSSxDQUFDYSxNQUFNLENBQUMsQ0FDM0JDLE1BQU0sQ0FBRVgsTUFBTSxDQUNkQyxLQUFLLENBQ0xFLFFBQVEsQ0FDUkQsSUFDSixDQUFDLENBQUMsRUFBQWQsY0FBQSxHQUFBTSxDQUFBLE9BRUYsTUFBTyxDQUFBZSxJQUFJLENBQUNHLEdBQUcsQ0FDbkIsQ0FBQyxFQUFFLENBQUMsQ0FFSjtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNKLENBQUMifQ==