function cov_kslnirhgz(){var path="/Users/mario/Desktop/Github Repo/AppIsdi/Fullstack/Api/logic/authenticateUser.js";var hash="fd238a1503306f06db181d87ff31b10775450af6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mario/Desktop/Github Repo/AppIsdi/Fullstack/Api/logic/authenticateUser.js",statementMap:{"0":{start:{line:4,column:4},end:{line:4,column:18}},"1":{start:{line:5,column:17},end:{line:5,column:42}},"2":{start:{line:21,column:0},end:{line:35,column:1}},"3":{start:{line:22,column:4},end:{line:22,column:24}},"4":{start:{line:23,column:4},end:{line:23,column:30}},"5":{start:{line:25,column:4},end:{line:34,column:8}},"6":{start:{line:26,column:21},end:{line:26,column:50}},"7":{start:{line:28,column:8},end:{line:28,column:61}},"8":{start:{line:28,column:19},end:{line:28,column:61}},"9":{start:{line:30,column:8},end:{line:31,column:53}},"10":{start:{line:31,column:12},end:{line:31,column:53}},"11":{start:{line:33,column:8},end:{line:33,column:22}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:21,column:17},end:{line:21,column:18}},loc:{start:{line:21,column:38},end:{line:35,column:1}},line:21},"1":{name:"(anonymous_1)",decl:{start:{line:25,column:12},end:{line:25,column:13}},loc:{start:{line:25,column:24},end:{line:34,column:5}},line:25}},branchMap:{"0":{loc:{start:{line:28,column:8},end:{line:28,column:61}},type:"if",locations:[{start:{line:28,column:8},end:{line:28,column:61}},{start:{line:28,column:8},end:{line:28,column:61}}],line:28},"1":{loc:{start:{line:30,column:8},end:{line:31,column:53}},type:"if",locations:[{start:{line:30,column:8},end:{line:31,column:53}},{start:{line:30,column:8},end:{line:31,column:53}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"fd238a1503306f06db181d87ff31b10775450af6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_kslnirhgz=function(){return actualCoverage;};}return actualCoverage;}cov_kslnirhgz();const{validators:{validateEmail,validatePassword},errors:{ExistenceError,AuthError}}=(cov_kslnirhgz().s[0]++,require('com'));const{User}=(cov_kslnirhgz().s[1]++,require('../data/models'));/**
 *Authenticate a user against his/her credentials
 * @param {string} email
 * @param {string} password
 *
 * @returns {Promise<string>} the userId
 *
 * @throws {TypeError} On non-string email or password
 * @throws {ContentError} On empty or blanck email or password
 * @throws {AuthError} On wrong credentials
 * @throws {ExistenceError} On non-existing user
 * @throws {RangeError} On password lenght not between 8 and 16 characters
 **/cov_kslnirhgz().s[2]++;module.exports=(email,password)=>{cov_kslnirhgz().f[0]++;cov_kslnirhgz().s[3]++;validateEmail(email);cov_kslnirhgz().s[4]++;validatePassword(password);cov_kslnirhgz().s[5]++;return(async()=>{cov_kslnirhgz().f[1]++;const user=(cov_kslnirhgz().s[6]++,await User.findOne({email}));cov_kslnirhgz().s[7]++;if(!user){cov_kslnirhgz().b[0][0]++;cov_kslnirhgz().s[8]++;throw new ExistenceError('User not found');}else{cov_kslnirhgz().b[0][1]++;}cov_kslnirhgz().s[9]++;if(user.password!==password){cov_kslnirhgz().b[1][0]++;cov_kslnirhgz().s[10]++;throw new AuthError('Wrong credentials!');}else{cov_kslnirhgz().b[1][1]++;}cov_kslnirhgz().s[11]++;return user.id;})();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3Zfa3NsbmlyaGd6IiwiYWN0dWFsQ292ZXJhZ2UiLCJ2YWxpZGF0b3JzIiwidmFsaWRhdGVFbWFpbCIsInZhbGlkYXRlUGFzc3dvcmQiLCJlcnJvcnMiLCJFeGlzdGVuY2VFcnJvciIsIkF1dGhFcnJvciIsInMiLCJyZXF1aXJlIiwiVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiLCJlbWFpbCIsInBhc3N3b3JkIiwiZiIsInVzZXIiLCJmaW5kT25lIiwiYiIsImlkIl0sInNvdXJjZXMiOlsiYXV0aGVudGljYXRlVXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7XG4gICAgdmFsaWRhdG9yczogeyB2YWxpZGF0ZUVtYWlsLCB2YWxpZGF0ZVBhc3N3b3JkIH0sXG4gICAgZXJyb3JzOiB7IEV4aXN0ZW5jZUVycm9yLCBBdXRoRXJyb3IgfSxcbn0gPSByZXF1aXJlKCdjb20nKVxuY29uc3QgeyBVc2VyIH0gPSByZXF1aXJlKCcuLi9kYXRhL21vZGVscycpXG5cbi8qKlxuICpBdXRoZW50aWNhdGUgYSB1c2VyIGFnYWluc3QgaGlzL2hlciBjcmVkZW50aWFsc1xuICogQHBhcmFtIHtzdHJpbmd9IGVtYWlsXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmRcbiAqXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSB0aGUgdXNlcklkXG4gKlxuICogQHRocm93cyB7VHlwZUVycm9yfSBPbiBub24tc3RyaW5nIGVtYWlsIG9yIHBhc3N3b3JkXG4gKiBAdGhyb3dzIHtDb250ZW50RXJyb3J9IE9uIGVtcHR5IG9yIGJsYW5jayBlbWFpbCBvciBwYXNzd29yZFxuICogQHRocm93cyB7QXV0aEVycm9yfSBPbiB3cm9uZyBjcmVkZW50aWFsc1xuICogQHRocm93cyB7RXhpc3RlbmNlRXJyb3J9IE9uIG5vbi1leGlzdGluZyB1c2VyXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBPbiBwYXNzd29yZCBsZW5naHQgbm90IGJldHdlZW4gOCBhbmQgMTYgY2hhcmFjdGVyc1xuICoqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IChlbWFpbCwgcGFzc3dvcmQpID0+IHtcbiAgICB2YWxpZGF0ZUVtYWlsKGVtYWlsKVxuICAgIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQpXG5cbiAgICByZXR1cm4gKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pXG5cbiAgICAgICAgaWYgKCF1c2VyKSB0aHJvdyBuZXcgRXhpc3RlbmNlRXJyb3IoJ1VzZXIgbm90IGZvdW5kJylcblxuICAgICAgICBpZiAodXNlci5wYXNzd29yZCAhPT0gcGFzc3dvcmQpXG4gICAgICAgICAgICB0aHJvdyBuZXcgQXV0aEVycm9yKCdXcm9uZyBjcmVkZW50aWFscyEnKVxuXG4gICAgICAgIHJldHVybiB1c2VyLmlkXG4gICAgfSkoKVxufVxuIl0sIm1hcHBpbmdzIjoiK2lFQWVZO0FBQUFBLGFBQUEsU0FBQUEsQ0FBQSxTQUFBQyxjQUFBLFdBQUFBLGNBQUEsRUFBQUQsYUFBQSxHQWZaLEtBQU0sQ0FDRkUsVUFBVSxDQUFFLENBQUVDLGFBQWEsQ0FBRUMsZ0JBQWlCLENBQUMsQ0FDL0NDLE1BQU0sQ0FBRSxDQUFFQyxjQUFjLENBQUVDLFNBQVUsQ0FDeEMsQ0FBQyxFQUFBUCxhQUFBLEdBQUFRLENBQUEsTUFBR0MsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUNsQixLQUFNLENBQUVDLElBQUssQ0FBQyxFQUFBVixhQUFBLEdBQUFRLENBQUEsTUFBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEVBRTFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBWkFULGFBQUEsR0FBQVEsQ0FBQSxNQWNBRyxNQUFNLENBQUNDLE9BQU8sQ0FBRyxDQUFDQyxLQUFLLENBQUVDLFFBQVEsR0FBSyxDQUFBZCxhQUFBLEdBQUFlLENBQUEsTUFBQWYsYUFBQSxHQUFBUSxDQUFBLE1BQ2xDTCxhQUFhLENBQUNVLEtBQUssQ0FBQyxDQUFBYixhQUFBLEdBQUFRLENBQUEsTUFDcEJKLGdCQUFnQixDQUFDVSxRQUFRLENBQUMsQ0FBQWQsYUFBQSxHQUFBUSxDQUFBLE1BRTFCLE1BQU8sQ0FBQyxTQUFZLENBQUFSLGFBQUEsR0FBQWUsQ0FBQSxNQUNoQixLQUFNLENBQUFDLElBQUksRUFBQWhCLGFBQUEsR0FBQVEsQ0FBQSxNQUFHLEtBQU0sQ0FBQUUsSUFBSSxDQUFDTyxPQUFPLENBQUMsQ0FBRUosS0FBTSxDQUFDLENBQUMsRUFBQWIsYUFBQSxHQUFBUSxDQUFBLE1BRTFDLEdBQUksQ0FBQ1EsSUFBSSxDQUFFLENBQUFoQixhQUFBLEdBQUFrQixDQUFBLFNBQUFsQixhQUFBLEdBQUFRLENBQUEsV0FBTSxJQUFJLENBQUFGLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFELENBQUMsS0FBQU4sYUFBQSxHQUFBa0IsQ0FBQSxVQUFBbEIsYUFBQSxHQUFBUSxDQUFBLE1BRXJELEdBQUlRLElBQUksQ0FBQ0YsUUFBUSxHQUFLQSxRQUFRLENBQzFCLENBQUFkLGFBQUEsR0FBQWtCLENBQUEsU0FBQWxCLGFBQUEsR0FBQVEsQ0FBQSxZQUFNLElBQUksQ0FBQUQsU0FBUyxDQUFDLG9CQUFvQixDQUFDLENBQUQsQ0FBQyxLQUFBUCxhQUFBLEdBQUFrQixDQUFBLFVBQUFsQixhQUFBLEdBQUFRLENBQUEsT0FFN0MsTUFBTyxDQUFBUSxJQUFJLENBQUNHLEVBQUUsQ0FDbEIsQ0FBQyxFQUFFLENBQUMsQ0FDUixDQUFDIn0=