function cov_1drd5kq7dm(){var path="/Users/mario/Desktop/FinalProyect/Api/logic/retrievePost.js";var hash="547ef1ffaa0c0dc74fd01ce25d513ebc10ea32bb";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/mario/Desktop/FinalProyect/Api/logic/retrievePost.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:18}},"1":{start:{line:4,column:23},end:{line:4,column:48}},"2":{start:{line:6,column:0},end:{line:26,column:1}},"3":{start:{line:7,column:4},end:{line:7,column:33}},"4":{start:{line:8,column:4},end:{line:8,column:33}},"5":{start:{line:10,column:4},end:{line:25,column:6}},"6":{start:{line:14,column:8},end:{line:14,column:70}},"7":{start:{line:14,column:19},end:{line:14,column:70}},"8":{start:{line:15,column:8},end:{line:15,column:70}},"9":{start:{line:15,column:19},end:{line:15,column:70}},"10":{start:{line:17,column:8},end:{line:20,column:13}},"11":{start:{line:18,column:12},end:{line:20,column:13}},"12":{start:{line:22,column:8},end:{line:22,column:26}},"13":{start:{line:24,column:8},end:{line:24,column:19}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:17},end:{line:6,column:18}},loc:{start:{line:6,column:37},end:{line:26,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:12},end:{line:13,column:13}},loc:{start:{line:13,column:30},end:{line:25,column:5}},line:13}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:14,column:70}},type:"if",locations:[{start:{line:14,column:8},end:{line:14,column:70}},{start:{line:14,column:8},end:{line:14,column:70}}],line:14},"1":{loc:{start:{line:15,column:8},end:{line:15,column:70}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:70}},{start:{line:15,column:8},end:{line:15,column:70}}],line:15},"2":{loc:{start:{line:17,column:8},end:{line:20,column:13}},type:"if",locations:[{start:{line:17,column:8},end:{line:20,column:13}},{start:{line:17,column:8},end:{line:20,column:13}}],line:17}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"547ef1ffaa0c0dc74fd01ce25d513ebc10ea32bb"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1drd5kq7dm=function(){return actualCoverage;};}return actualCoverage;}cov_1drd5kq7dm();const{validators:{validateId}}=(cov_1drd5kq7dm().s[0]++,require('com'));const{User,Post}=(cov_1drd5kq7dm().s[1]++,require('../data/models'));cov_1drd5kq7dm().s[2]++;module.exports=(userId,postId)=>{cov_1drd5kq7dm().f[0]++;cov_1drd5kq7dm().s[3]++;validateId(userId,'User Id');cov_1drd5kq7dm().s[4]++;validateId(postId,'Post Id');cov_1drd5kq7dm().s[5]++;return Promise.all([User.findById(userId,'-__v').lean(),Post.findById(postId,'-_id -__v -date -likes -paymentMethods').lean()]).then(([user,post])=>{cov_1drd5kq7dm().f[1]++;cov_1drd5kq7dm().s[6]++;if(!user){cov_1drd5kq7dm().b[0][0]++;cov_1drd5kq7dm().s[7]++;throw new Error(`User with id ${userId} not found`);}else{cov_1drd5kq7dm().b[0][1]++;}cov_1drd5kq7dm().s[8]++;if(!post){cov_1drd5kq7dm().b[1][0]++;cov_1drd5kq7dm().s[9]++;throw new Error(`Post with id ${postId} not found`);}else{cov_1drd5kq7dm().b[1][1]++;}cov_1drd5kq7dm().s[10]++;if(post.author.toString()!==userId){cov_1drd5kq7dm().b[2][0]++;cov_1drd5kq7dm().s[11]++;throw new Error(`User with id ${userId} is not the author of post with id ${postId}`);}else{cov_1drd5kq7dm().b[2][1]++;}cov_1drd5kq7dm().s[12]++;delete post.author;cov_1drd5kq7dm().s[13]++;return post;});};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWRyZDVrcTdkbSIsImFjdHVhbENvdmVyYWdlIiwidmFsaWRhdG9ycyIsInZhbGlkYXRlSWQiLCJzIiwicmVxdWlyZSIsIlVzZXIiLCJQb3N0IiwibW9kdWxlIiwiZXhwb3J0cyIsInVzZXJJZCIsInBvc3RJZCIsImYiLCJQcm9taXNlIiwiYWxsIiwiZmluZEJ5SWQiLCJsZWFuIiwidGhlbiIsInVzZXIiLCJwb3N0IiwiYiIsIkVycm9yIiwiYXV0aG9yIiwidG9TdHJpbmciXSwic291cmNlcyI6WyJyZXRyaWV2ZVBvc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qge1xuICAgIHZhbGlkYXRvcnM6IHsgdmFsaWRhdGVJZCB9LFxufSA9IHJlcXVpcmUoJ2NvbScpXG5jb25zdCB7IFVzZXIsIFBvc3QgfSA9IHJlcXVpcmUoJy4uL2RhdGEvbW9kZWxzJylcblxubW9kdWxlLmV4cG9ydHMgPSAodXNlcklkLCBwb3N0SWQpID0+IHtcbiAgICB2YWxpZGF0ZUlkKHVzZXJJZCwgJ1VzZXIgSWQnKVxuICAgIHZhbGlkYXRlSWQocG9zdElkLCAnUG9zdCBJZCcpXG5cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW1xuICAgICAgICBVc2VyLmZpbmRCeUlkKHVzZXJJZCwgJy1fX3YnKS5sZWFuKCksXG4gICAgICAgIFBvc3QuZmluZEJ5SWQocG9zdElkLCAnLV9pZCAtX192IC1kYXRlIC1saWtlcyAtcGF5bWVudE1ldGhvZHMnKS5sZWFuKCksXG4gICAgXSkudGhlbigoW3VzZXIsIHBvc3RdKSA9PiB7XG4gICAgICAgIGlmICghdXNlcikgdGhyb3cgbmV3IEVycm9yKGBVc2VyIHdpdGggaWQgJHt1c2VySWR9IG5vdCBmb3VuZGApXG4gICAgICAgIGlmICghcG9zdCkgdGhyb3cgbmV3IEVycm9yKGBQb3N0IHdpdGggaWQgJHtwb3N0SWR9IG5vdCBmb3VuZGApXG5cbiAgICAgICAgaWYgKHBvc3QuYXV0aG9yLnRvU3RyaW5nKCkgIT09IHVzZXJJZClcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgVXNlciB3aXRoIGlkICR7dXNlcklkfSBpcyBub3QgdGhlIGF1dGhvciBvZiBwb3N0IHdpdGggaWQgJHtwb3N0SWR9YFxuICAgICAgICAgICAgKVxuXG4gICAgICAgIGRlbGV0ZSBwb3N0LmF1dGhvclxuXG4gICAgICAgIHJldHVybiBwb3N0XG4gICAgfSlcbn1cbiJdLCJtYXBwaW5ncyI6InMwRUFlWTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsR0FmWixLQUFNLENBQ0ZFLFVBQVUsQ0FBRSxDQUFFQyxVQUFXLENBQzdCLENBQUMsRUFBQUgsY0FBQSxHQUFBSSxDQUFBLE1BQUdDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFDbEIsS0FBTSxDQUFFQyxJQUFJLENBQUVDLElBQUssQ0FBQyxFQUFBUCxjQUFBLEdBQUFJLENBQUEsTUFBR0MsT0FBTyxDQUFDLGdCQUFnQixDQUFDLEVBQUFMLGNBQUEsR0FBQUksQ0FBQSxNQUVoREksTUFBTSxDQUFDQyxPQUFPLENBQUcsQ0FBQ0MsTUFBTSxDQUFFQyxNQUFNLEdBQUssQ0FBQVgsY0FBQSxHQUFBWSxDQUFBLE1BQUFaLGNBQUEsR0FBQUksQ0FBQSxNQUNqQ0QsVUFBVSxDQUFDTyxNQUFNLENBQUUsU0FBUyxDQUFDLENBQUFWLGNBQUEsR0FBQUksQ0FBQSxNQUM3QkQsVUFBVSxDQUFDUSxNQUFNLENBQUUsU0FBUyxDQUFDLENBQUFYLGNBQUEsR0FBQUksQ0FBQSxNQUU3QixNQUFPLENBQUFTLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQ2ZSLElBQUksQ0FBQ1MsUUFBUSxDQUFDTCxNQUFNLENBQUUsTUFBTSxDQUFDLENBQUNNLElBQUksQ0FBQyxDQUFDLENBQ3BDVCxJQUFJLENBQUNRLFFBQVEsQ0FBQ0osTUFBTSxDQUFFLHdDQUF3QyxDQUFDLENBQUNLLElBQUksQ0FBQyxDQUFDLENBQ3pFLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFQyxJQUFJLENBQUMsR0FBSyxDQUFBbkIsY0FBQSxHQUFBWSxDQUFBLE1BQUFaLGNBQUEsR0FBQUksQ0FBQSxNQUN0QixHQUFJLENBQUNjLElBQUksQ0FBRSxDQUFBbEIsY0FBQSxHQUFBb0IsQ0FBQSxTQUFBcEIsY0FBQSxHQUFBSSxDQUFBLFdBQU0sSUFBSSxDQUFBaUIsS0FBSyxDQUFFLGdCQUFlWCxNQUFPLFlBQVcsQ0FBQyxDQUFELENBQUMsS0FBQVYsY0FBQSxHQUFBb0IsQ0FBQSxVQUFBcEIsY0FBQSxHQUFBSSxDQUFBLE1BQzlELEdBQUksQ0FBQ2UsSUFBSSxDQUFFLENBQUFuQixjQUFBLEdBQUFvQixDQUFBLFNBQUFwQixjQUFBLEdBQUFJLENBQUEsV0FBTSxJQUFJLENBQUFpQixLQUFLLENBQUUsZ0JBQWVWLE1BQU8sWUFBVyxDQUFDLENBQUQsQ0FBQyxLQUFBWCxjQUFBLEdBQUFvQixDQUFBLFVBQUFwQixjQUFBLEdBQUFJLENBQUEsT0FFOUQsR0FBSWUsSUFBSSxDQUFDRyxNQUFNLENBQUNDLFFBQVEsQ0FBQyxDQUFDLEdBQUtiLE1BQU0sQ0FDakMsQ0FBQVYsY0FBQSxHQUFBb0IsQ0FBQSxTQUFBcEIsY0FBQSxHQUFBSSxDQUFBLFlBQU0sSUFBSSxDQUFBaUIsS0FBSyxDQUNWLGdCQUFlWCxNQUFPLHNDQUFxQ0MsTUFBTyxFQUN2RSxDQUFDLENBQUQsQ0FBQyxLQUFBWCxjQUFBLEdBQUFvQixDQUFBLFVBQUFwQixjQUFBLEdBQUFJLENBQUEsT0FFTCxNQUFPLENBQUFlLElBQUksQ0FBQ0csTUFBTSxDQUFBdEIsY0FBQSxHQUFBSSxDQUFBLE9BRWxCLE1BQU8sQ0FBQWUsSUFBSSxDQUNmLENBQUMsQ0FBQyxDQUNOLENBQUMifQ==